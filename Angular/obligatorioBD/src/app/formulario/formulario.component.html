<!-- app.component.html -->

<div class="container">
    <h1>
        {{header}}
    </h1>
    <form [formGroup]="angForm" novalidate>
        <div class="form-group">
            <label>CI:</label>
            <input class="form-control" formControlName="ci" type="text" minlength="7" maxlength="8" ngModel
                pattern="[0-9]*">
        </div>

        <div class="error" *ngIf="angForm.controls['ci'].invalid && (angForm.controls['ci'].dirty || 
            angForm.controls['ci'].touched)">
            <div [hidden]="!angForm.controls['ci'].errors.required">
                CI no puede estar vacía.
            </div>
            <div [hidden]="!angForm.controls['ci'].errors.minlength">
                Largo mínimo de 7 caracteres.
            </div>
            <div [hidden]="!angForm.controls['ci'].errors.pattern">
                Solo se permiten números.
            </div>
        </div>

        <div class="form-group">
            <label>Nombre:</label>
            <input class="form-control" formControlName="name" type="text">
        </div>

        <div class="error"
            *ngIf="angForm.controls['name'].invalid && (angForm.controls['name'].dirty || angForm.controls['name'].touched)">
            <div [hidden]="!angForm.controls['name'].errors.required">
                Nombre no puede estar vacío.
            </div>
        </div>

        <div class="form-group">
            <label>Apellido:</label>
            <input class="form-control" formControlName="lastname" type="text">
        </div>

        <div class="error"
            *ngIf="angForm.controls['lastname'].invalid && (angForm.controls['lastname'].dirty || angForm.controls['lastname'].touched)">
            <div [hidden]="!angForm.controls['lastname'].errors.required">
                Apellido no puede estar vacío.
            </div>
        </div>
        <!-- REGISTRARSE -->
        <div *ngIf="registrar" class="form-group">
            <label>Nombre de usuario:</label>
            <input class="form-control" formControlName="username" type="text">
        </div>

        <div class="error"
            *ngIf="registrar && angForm.controls['username'].invalid && (angForm.controls['username'].dirty || angForm.controls['username'].touched)">
            <div [hidden]="!angForm.controls['username'].errors.required">
                Nombre de usuario no puede estar vacío.
            </div>
        </div>

        <div *ngIf="registrar" class="form-group">
            <label>Contraseña:</label>
            <input class="form-control" formControlName="password" type="text">
        </div>

        <div class="error"
            *ngIf="registrar && angForm.controls['password'].invalid && (angForm.controls['password'].dirty || angForm.controls['password'].touched)">
            <div [hidden]="!angForm.controls['password'].errors.required">
                Contraseña no puede estar vacía.
            </div>
        </div>


        <div *ngIf="registrar" class="form-group">
            <label>Domicilio:</label>
            <input class="form-control" formControlName="domicilio" type="text">
        </div>

        <div class="error"
            *ngIf="registrar && angForm.controls['domicilio'].invalid && (angForm.controls['domicilio'].dirty || angForm.controls['domicilio'].touched)">
            <div [hidden]="!angForm.controls['domicilio'].errors.required">
                Domicilio no puede estar vacío.
            </div>
        </div>

        <div *ngIf="registrar" class="form-group">
            <label>Correo electrónico:</label>
            <input class="form-control" formControlName="email" type="text">
        </div>

        <div class="error"
            *ngIf="registrar && angForm.controls['email'].invalid && (angForm.controls['email'].dirty || angForm.controls['email'].touched)">
            <div [hidden]="!angForm.controls['email'].errors.required">
                Correo no puede estar vacío.
            </div>
            <div [hidden]="!angForm.controls['email'].errors.pattern">
                El mail debe tener formato email@dominio.com
            </div>
        </div>

        <div *ngIf="registrar" class="form-group">
            <label>Telefono:</label>
            <input class="form-control" formControlName="tel" type="text">
        </div>

        <div class="error"
            *ngIf="registrar && angForm.controls['tel'].invalid && (angForm.controls['tel'].dirty || angForm.controls['tel'].touched)">
            <div [hidden]="!angForm.controls['tel'].errors.required">
                Telefono no puede estar vacío.
            </div>
            <div [hidden]="!angForm.controls['tel'].errors.minlength">
                Largo mínimo de 8 caracteres.
            </div>
            <div [hidden]="!angForm.controls['tel'].errors.pattern">
                Solo se permiten números.
            </div>
        </div>


        <!-- FIN REGISTRARSE -->


        <div class="form-group">
            <label>Fecha Nacimiento:</label>
            <input class="form-control" formControlName="fchNac" max="{{date | date:'yyyy-MM-dd'}}" type="date">
        </div>

        <div class="error" *ngIf="angForm.controls['fchNac'].invalid && (angForm.controls['fchNac'].dirty 
            || angForm.controls['fchNac'].touched)">
            <div [hidden]="!angForm.controls['fchNac'].errors.required">
                Fecha de nacimiento no puede estar vacía.
            </div>
        </div>

        <div class="form-group">
            <label>Carne de salud: </label>
            <select #carne class="form-control" formControlName="carne" name="carne" (change)="onSelected(carne.value)">
                <option default value="no">No</option>
                <option value="si">Si</option>
            </select>
        </div>
        <div class="error" *ngIf="angForm.controls['carne'].invalid && (angForm.controls['carne'].dirty 
            || angForm.controls['carne'].touched)">
            <div [hidden]="!angForm.controls['carne'].errors.required">
                Fecha de nacimiento no puede estar vacía.
            </div>
        </div>

        <div *ngIf="!escondido" class="form-group">
            <label>Fecha Emisión:</label>
            <input class="form-control" formControlName="fchEm" min="{{date | date:'yyyy-MM-dd'}}" type="date">
        </div>

        <div class="error" *ngIf="!escondido && angForm.controls['fchEm'].invalid && (angForm.controls['fchEm'].dirty 
            || angForm.controls['fchEm'].touched)">
            <div [hidden]="!angForm.controls['fchEm'].errors.required">
                Fecha de emision no puede estar vacía.
            </div>
        </div>

        <div *ngIf="!escondido" class="form-group">
            <label>Fecha Vencimiento:</label>
            <input class="form-control" formControlName="fchVen" min="{{date | date:'yyyy-MM-dd'}}" type="date">
        </div>

        <div class="error" *ngIf="!escondido && angForm.controls['fchVen'].invalid && (angForm.controls['fchVen'].dirty 
            || angForm.controls['fchVen'].touched)">
            <div [hidden]="!angForm.controls['fchVen'].errors.required">
                Fecha de vencimiento no puede estar vacía.
            </div>
        </div>



        <div *ngIf="!escondido" class="form-group">
            <label>Comprobante:</label>
            <input class="form-control" formControlName="comprobante" type="file" accept="image/jpeg, application/pdf">
        </div>

        <div class="error" *ngIf="!escondido && angForm.controls['comprobante'].invalid && (angForm.controls['comprobante'].dirty || 
            angForm.controls['comprobante'].touched)">
            <div [hidden]="!angForm.controls['comprobante'].errors.required">
                Comprobante no puede estar vacío.
            </div>
        </div>
        <br>
        <div id="botones">
            <button type="submit" class="btn btn-secondary" (click)="volver()">
                Volver
            </button>
            <button type="submit" [disabled]="angForm.pristine || angForm.invalid" class="btn btn-primary"
                (click)="enviarFormulario()">
                Guardar
            </button>
        </div>




    </form>

</div>